@inject UserData UserData
@inject NavigationManager NavigationManager
@using FinalTestProject.Models.Accounts
@using static FinalTestProject.Models.Constants;
@using FinalTestProject.Data;
@using Microsoft.EntityFrameworkCore
@inject DatabaseHandler DatabaseHandler;
@page "/"


<PageTitle>Login</PageTitle>

@inject IDbContextFactory<UbysSystemDbContext> UbysSystemDbContext;

<div class="d-flex justify-content-center">
    <h1>UBYS Sistemine Hosgeldiniz</h1>
</div>

<div class="d-flex justify-content-center"> Giris yapiniz </div>

<text> &nbsp; &nbsp; &nbsp;</text>

<div class="d-flex justify-content-center">
    Kimlik No: <input type="number" inputmode="numeric" pattern="[0-9]*" @bind="UserKimlikNo" />
</div>

<div style="margin-top: 20px;" class="form-group password-container d-flex justify-content-center">
    <label for="passwordInput">Password:</label>
    <input type="password" id="passwordInput" @bind="Password" />
</div>

<div style="margin-top: 20px;" class="d-flex justify-content-center">
    <button type="button" @onclick="LoginControl">Login</button>
</div>

<!-- Hata mesajını göstermek için eklenen kısım -->
@if (!string.IsNullOrEmpty(errorMessage))
{
    <div style="color: red; margin-top: 20px;" class="d-flex justify-content-center">
        @errorMessage
    </div>
}

<text> &nbsp; &nbsp; &nbsp;</text>

<div class="d-flex justify-content-center"> Ogrenci icin : 11122233344, 123456 </div>
<div class="d-flex justify-content-center"> Idareci icin : 33344455566, 1212 </div>
<div class="d-flex justify-content-center"> OgretimElemani icin : 12345654321, 2323 </div>
<div class="d-flex justify-content-center"> Danisman icin : 11223344556, 1234 </div>

@if (@OgrenciList is not null && @OgrenciList.Count > 0)
{
    <div class="table-responsive">
        <table class="table table-striped table-hover table-bordered table-light border-dark">
            <thead>
                <tr>
                    <th scope="col">TCKimlikNo</th>
                    <th scope="col">Ad</th>
                    <th scope="col">Password</th>
                    <th scope="col">UyelikType</th>
                    <th scope="col">Sinif</th>
                    <th scope="col">Donem</th>
                    <th scope="col">Danisman</th>
                    <th scope="col">Dersler</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var Ogrenci in @OgrenciList)
                {
                    <tr>
                        <th scope="row">@Ogrenci.TCKimlikNo</th>
                        <td>@Ogrenci.Ad</td>
                        <td>@Ogrenci.Password</td>
                        <td>@Ogrenci.UyelikType</td>
                        <td>@Ogrenci.Sinif</td>
                        <td>@Ogrenci.Donem</td>
                        <td>@Ogrenci.OgrenciDanismani</td>
                        <td>@string.Join(", ", Ogrenci.SecilmisDersler)</td>
                    </tr>
                }

            </tbody>
        </table>
    </div>
}
